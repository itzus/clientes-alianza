<div class="cliente-form-container">
  <mat-card-header>
    <mat-card-title>Create New Client</mat-card-title>
  </mat-card-header>
  <span><br /></span>
  <mat-card-content>
    <form
      [formGroup]="clienteForm"
      (ngSubmit)="onSubmit()"
      class="cliente-form"
    >
      <div class="form-row">
        <mat-form-field appearance="outline">
          <mat-label>Name</mat-label>
          <input
            matInput
            formControlName="nombre"
            placeholder="Ingrese el nombre completo"
          />
          <mat-error *ngIf="clienteForm.get('nombre')?.invalid">{{
            getErrorMessage("nombre")
          }}</mat-error>
        </mat-form-field>
      </div>

      <div class="form-row">
        <mat-form-field appearance="outline">
          <mat-label>Phone</mat-label>
          <input
            matInput
            formControlName="telefono"
            placeholder="Ingrese el telÃ©fono"
            pattern="[0-9]*"
            maxlength="10"
            inputmode="numeric"
          />
          <mat-error *ngIf="clienteForm.get('telefono')?.invalid">{{
            getErrorMessage("telefono")
          }}</mat-error>
          <mat-error *ngIf="clienteForm.get('telefono')?.errors?.['pattern']">
            {{ getErrorMessage("numbers") }}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="form-row">
        <mat-form-field appearance="outline">
          <mat-label>E-mail</mat-label>
          <input
            matInput
            formControlName="email"
            placeholder="Ingrese el email"
            type="email"
          />
          <mat-error *ngIf="clienteForm.get('email')?.invalid">{{
            getErrorMessage("email")
          }}</mat-error>
        </mat-form-field>
      </div>

      <div class="form-row date-row">
        <mat-form-field appearance="outline">
          <mat-label>Start Date</mat-label>
          <input
            matInput
            [matDatepicker]="pickerInicio"
            formControlName="fechaInicio"
          />
          <mat-datepicker-toggle
            matSuffix
            [for]="pickerInicio"
          ></mat-datepicker-toggle>
          <mat-datepicker #pickerInicio></mat-datepicker>
          <mat-error *ngIf="clienteForm.get('fechaInicio')?.invalid">{{
            getErrorMessage("fechaInicio")
          }}</mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>End Date</mat-label>
          <input
            matInput
            [matDatepicker]="pickerFin"
            formControlName="fechaFin"
          />
          <mat-datepicker-toggle
            matSuffix
            [for]="pickerFin"
          ></mat-datepicker-toggle>
          <mat-datepicker #pickerFin></mat-datepicker>
          <mat-error *ngIf="clienteForm.get('fechaFin')?.invalid">{{
            getErrorMessage("fechaFin")
          }}</mat-error>
        </mat-form-field>
      </div>

      <div *ngIf="clienteForm.hasError('fechasInvalidas')" class="date-error">
        {{ getFechasError() }}
      </div>

      <div class="form-actions">
        <button
          mat-raised-button
          color="primary"
          type="submit"
          [disabled]="isLoading"
        >
          <mat-icon>save</mat-icon> Ok
        </button>
        <button
          mat-raised-button
          color="warn"
          type="button"
          (click)="cerrarModal()"
          [disabled]="isLoading"
        >
          <mat-icon>cancel</mat-icon> Close
        </button>
      </div>
    </form>

    <div *ngIf="isLoading" class="loading-overlay">
      <mat-spinner></mat-spinner>
    </div>
  </mat-card-content>
</div>
